<div *ngIf="resource$ | async"></div>
<div class="dark:border-primary-darker flex items-center gap-4 border-b px-4 py-4 lg:py-6">
  <h1 class="flex-grow text-2xl font-semibold flex">
    <app-provider class="mr-2" [providerTypeOrName]="virtualMachine?.virtualmachine?.provider" [showText]="false"></app-provider>
    <span *ngIf="virtualMachine?.metadata?.name">{{ virtualMachine?.metadata?.name }}</span>
  </h1>

  <div
    class="hover:bg-primary-dark focus:ring-primary dark:focus:ring-offset-dark relative rounded-md bg-green-700 text-sm text-white focus:outline-none focus:ring focus:ring-offset-1 focus:ring-offset-white"
  ></div>

  <button
    class="hover:bg-primary-dark focus:ring-primary dark:focus:ring-offset-dark rounded-md bg-green-700 px-4 py-2 text-sm text-white focus:outline-none focus:ring focus:ring-offset-1 focus:ring-offset-white"
  >
    {{ 'common.refresh' | translate }}
  </button>

  <button
    class="focus:ring-primary dark:focus:ring-offset-dark ml-2 rounded-md bg-green-700 px-4 py-2 text-sm text-white hover:bg-green-500 focus:outline-none focus:ring focus:ring-offset-1 focus:ring-offset-white"
  >
    {{ 'common.edit' | translate }}
  </button>
</div>

<p-tabView styleClass="tabview" [(activeIndex)]="selectedTabIndex" (activeIndexChange)="switchTab($event)" [scrollable]="true">
  <p-tabPanel>
    <ng-template pTemplate="header">
      <div class="flex text-nowrap">
        <i class="pi pi-server mt-1"></i>
        <span class="ml-2">{{ 'pages.virtualmachines.details.title' | translate }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="content">
      <div class="">
        <div>
          <div class="dark:bg-transparent flex flex-col gap-4 rounded-md bg-white">
            <div class="p-3 flex flex-row gap-4">
              <div class="flex-shrink w-3/4">
                <div class="flex flex-col gap-4">
                  <div class="grid grid-cols-3 gap-4">
                    <app-virtualmachine-cpu></app-virtualmachine-cpu>
                    <app-virtualmachine-memory></app-virtualmachine-memory>
                    <app-virtualmachine-price></app-virtualmachine-price>
                  </div>
                  <div class="flex gap-4">
                    <app-virtualmachine-os class="mt-3 flex-grow overflow-y-auto h-full" [virtualmachine]="virtualMachine"></app-virtualmachine-os>
                    <app-virtualmachine-network
                      class="mt-3 flex-grow justify-stretch h-full"
                      [virtualmachine]="virtualMachine"
                    ></app-virtualmachine-network>
                  </div>

                  <app-virtualmachine-disks class="mt-3" [virtualmachine]="virtualMachine"></app-virtualmachine-disks>
                </div>
              </div>

              <div class="flex-grow w-1/4">
                <div class="grid-cols grid gap-4">
                  <app-virtualmachine-status [virtualmachine]="virtualMachine"></app-virtualmachine-status>
                  <app-virtualmachine-specs [virtualmachine]="virtualMachine"></app-virtualmachine-specs>
                  <app-virtualmachine-metadata [virtualmachine]="virtualMachine"></app-virtualmachine-metadata>
                  <app-virtualmachine-tools [virtualmachine]="virtualMachine" [userClaims]="userClaims"></app-virtualmachine-tools>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </p-tabPanel>

  <p-tabPanel header="{{ 'pages.virtualmachines.details.metrics.title' | translate }}">
    <ng-template pTemplate="header">
      <div class="flex text-nowrap">
        <i class="pi pi-chart-bar mt-1"></i>
        <span class="ml-2">{{ 'pages.virtualmachines.details.metrics.title' | translate }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="content">
      <div class="">
        <div class="flex flex-col rounded-md">
          <div class="p-3 flex flex-col">
            <app-virtualmachine-metrics [virtualmachine]="virtualMachine"></app-virtualmachine-metrics>
          </div>
        </div>
      </div>
    </ng-template>
  </p-tabPanel>

  <p-tabPanel header="{{ 'pages.virtualmachines.details.disks.title' | translate }}">
    <ng-template pTemplate="header">
      <div class="flex text-nowrap">
        <i class="pi pi-save mt-1"></i>
        <span class="ml-2">{{ 'pages.virtualmachines.details.disks.title' | translate }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="content">
      <div class="">
        <div class="dark:bg-darker flex flex-col rounded-md bg-white">
          <div class="p-3 flex flex-col">
            <app-virtualmachine-disks [virtualmachine]="virtualMachine"></app-virtualmachine-disks>
          </div>
        </div>
      </div>
    </ng-template>
  </p-tabPanel>

  <p-tabPanel header="{{ 'pages.virtualmachines.details.network.title' | translate }}">
    <ng-template pTemplate="header">
      <div class="flex text-nowrap">
        <i class="pi pi-wifi mt-1"></i>
        <span class="ml-2">{{ 'pages.virtualmachines.details.network.title' | translate }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="content">
      <div class="">
        <div class="dark:bg-darker flex flex-col rounded-md bg-white">
          <div class="p-3 flex flex-col">
            <app-virtualmachine-network [virtualmachine]="virtualMachine"></app-virtualmachine-network>
          </div>
        </div>
      </div>
    </ng-template>
  </p-tabPanel>

  <p-tabPanel header="{{ 'pages.virtualmachines.details.metadata.title' | translate }}">
    <ng-template pTemplate="header">
      <div class="flex text-nowrap">
        <i class="pi pi-file mt-1"></i>
        <span class="ml-2">{{ 'pages.virtualmachines.details.metadata.title' | translate }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="content">
      <div class="">
        <div class="dark:bg-darker flex flex-col rounded-md bg-white">
          <div class="p-3 flex flex-col">
            <app-virtualmachine-metadata [virtualmachine]="virtualMachine"></app-virtualmachine-metadata>
          </div>
        </div>
      </div>
    </ng-template>
  </p-tabPanel>

  <p-tabPanel header="{{ 'pages.virtualmachines.details.backups.title' | translate }}">
    <ng-template pTemplate="header">
      <div class="flex text-nowrap">
        <i class="pi pi-objects-column mt-1"></i>
        <span class="ml-2">{{ 'pages.virtualmachines.details.backups.title' | translate }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="content">
      <div class="">
        <div class="dark:bg-darker flex flex-col rounded-md bg-white">
          <div class="p-3 flex flex-col">
            <app-virtualmachine-backup [virtualmachine]="virtualMachine"></app-virtualmachine-backup>
          </div>
        </div>
      </div>
    </ng-template>
  </p-tabPanel>

  <p-tabPanel header="{{ 'pages.virtualmachines.details.remotecontrol.title' | translate }}">
    <ng-template pTemplate="header">
      <div class="flex text-nowrap">
        <i class="pi pi-desktop mt-1"></i>
        <span class="ml-2">{{ 'pages.virtualmachines.details.remotecontrol.title' | translate }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="content">
      <div class="">
        <div class="dark:bg-darker flex flex-col rounded-md bg-white">
          <div class="p-3 flex flex-col">
            <app-virtualmachine-remote-control [virtualmachine]="virtualMachine"></app-virtualmachine-remote-control>
          </div>
        </div>
      </div>
    </ng-template>
  </p-tabPanel>

  <p-tabPanel header="{{ 'pages.virtualmachines.details.raw.title' | translate }}">
    <ng-template pTemplate="header">
      <div class="flex text-nowrap">
        <i class="pi pi-file mt-1"></i>
        <span class="ml-2">{{ 'pages.virtualmachines.details.raw.title' | translate }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="content">
      <div class="">
        <div class="dark:bg-darker flex flex-col rounded-md bg-white">
          <div class="p-3 flex flex-col">
            <app-virtualmachines-raw [resource]="resource$ | async"></app-virtualmachines-raw>
          </div>
        </div>
      </div>
    </ng-template>
  </p-tabPanel>
</p-tabView>
